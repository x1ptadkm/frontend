'use strict';var CMTV_Math=window.CMTV_Math||{};
!function(e,b){CMTV_Math.EditorDialogMath=XF.extend(XF.EditorDialog,{$form:null,formHandler:null,_beforeShow:function(a){this.ed.$el.blur()},_afterHide:function(a){console.log("here!")},_init:function(a){this.$form=b.querySelector("#editor_math_form");XF.on(this.$form,"submit",this.submit.bind(this));this.formHandler=XF.Element.getHandler(this.$form,"insert-math-form")},submit:function(a){a.preventDefault();a=this.ed;var c=this.overlay,d=this.formHandler.wrapMath(this.formHandler.$latexInput.value.trim());a.selection.restore();
a.html.insert(d);c.hide();this.$form.trigger("form:reset")}});XF.EditorHelpers.dialogs.CMTVMath=new CMTV_Math.EditorDialogMath("CMTVMath");XF.on(b,"editor:first-start",function(){XF.FE.DefineIcon("CMTV_Math",{NAME:"function"});XF.FE.RegisterCommand("CMTV_Math",{title:"CMTV_Math_insert_math",icon:"CMTV_Math",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,"CMTVMath")}});XF.editorStart.custom.push("CMTV_Math")})}(window,document);