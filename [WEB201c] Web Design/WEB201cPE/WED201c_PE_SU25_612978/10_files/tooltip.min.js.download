((f,g)=>{XF.PreviewTooltip=XF.Element.newHandler({options:{delay:600,previewUrl:null},trigger:null,tooltip:null,init(){this.options.previewUrl?(this.tooltip=new XF.TooltipElement(this.getContent.bind(this),{extraClass:"tooltip--preview",html:!0,loadRequired:!0}),this.trigger=new XF.TooltipTrigger(this.target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay}),this.trigger.init()):console.error("No preview URL")},getContent(a){XF.ajax("get",this.options.previewUrl,
{},b=>{this.loaded(b,a)},{skipDefault:!0,skipError:!0,global:!1})},loaded(a,b){a.html&&XF.setupHtmlInsert(a.html,(c,d,e)=>{b(c)})}});XF.ShareTooltip=XF.Element.newHandler({options:{delay:300,href:null,webShare:!0},trigger:null,tooltip:null,init(){if(this.options.webShare&&XF.Element.applyHandler(this.target,"web-share",{fetch:this.options.href,url:this.target.getAttribute("href"),hideContainerEls:!1}).isSupported())return!1;this.tooltip=new XF.TooltipElement(this.getContent.bind(this),{extraClass:"tooltip--share",
html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:"hover focus click",onShow:this.onShow.bind(this),onHide:this.onHide.bind(this)});this.trigger.init()},getContent(a){let b={skipDefault:!0,skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(b.global=!0);XF.ajax("get",this.options.href,{},c=>{this.loaded(c,a)},b)},loaded(a,b){a.html&&XF.setupHtmlInsert(a.html,(c,d,e)=>{b(c)})},
onShow(){let a=XF.ShareTooltip.activeTooltip;a&&a!==this&&a.hide();XF.ShareTooltip.activeTooltip=this},onHide(){XF.ShareTooltip.activeTooltip===this&&(XF.ShareTooltip.activeTooltip=null)},show(){this.trigger.show()},hide(){this.trigger.hide()}});XF.ShareTooltip.activeTooltip=null;XF.Element.register("preview-tooltip","XF.PreviewTooltip");XF.Element.register("share-tooltip","XF.ShareTooltip")})(window,document);
